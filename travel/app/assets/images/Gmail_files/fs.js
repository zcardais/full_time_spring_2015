try{"undefined"===typeof WeakMap&&function(){var h=Object.defineProperty,y=Date.now()%1E9,a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(y++ +"__")};a.prototype={set:function(a,g){var e=a[this.name];e&&e[0]===a?e[1]=g:h(a,this.name,{value:[a,g],writable:!0})},get:function(a){var g;return(g=a[this.name])&&g[0]===a?g[1]:void 0}};window.WeakMap=a}()}catch(e$$12){};try{(function(h){function y(){r=!1;var b=p;p=[];b.sort(function(a,b){return a.uid_-b.uid_});var f=!1;b.forEach(function(b){var k=b.takeRecords();a(b);k.length&&(b.callback_(k,b),f=!0)});f&&y()}function a(a){a.nodes_.forEach(function(b){(b=f.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function d(a,b){for(var k=a;k;k=k.parentNode){var c=f.get(k);if(c)for(var n=0;n<c.length;n++){var e=c[n],t=e.options;(k===a||t.subtree)&&(t=b(t))&&e.enqueue(t)}}}function g(a){this.callback_=
a;this.nodes_=[];this.records_=[];this.uid_=++q}function e(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function c(a,b){return s=new e(a,b)}function b(a){if(u)return u;var b=s,f=new e(b.type,b.target);f.addedNodes=b.addedNodes.slice();f.removedNodes=b.removedNodes.slice();f.previousSibling=b.previousSibling;f.nextSibling=b.nextSibling;f.attributeName=b.attributeName;f.attributeNamespace=
b.attributeNamespace;f.oldValue=b.oldValue;u=f;u.oldValue=a;return u}function k(a,b,f){this.observer=a;this.target=b;this.options=f;this.transientObservedNodes=[]}var f=new WeakMap,n=window.msSetImmediate;if(!n){var t=[],l=String(Math.random());window.addEventListener("message",function(a){a.data===l&&(a=t,t=[],a.forEach(function(a){a()}))});n=function(a){t.push(a);window.postMessage(l,"*")}}var r=!1,p=[],q=0;g.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||
a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=f.get(a);c||f.set(a,c=[]);for(var n,e=0;e<c.length;e++)if(c[e].observer===this){n=c[e];n.removeListeners();n.options=b;break}n||(n=new k(this,a,b),c.push(n),this.nodes_.push(a));n.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=f.get(a);for(var b=0;b<a.length;b++){var k=
a[b];if(k.observer===this){k.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var s,u;k.prototype={enqueue:function(a){var b=this.observer.records_,f=b.length;if(0<b.length){var k=b[f-1];k=k===a?k:!u||k!==u&&k!==s?null:u;if(k){b[f-1]=k;return}}else p.push(this.observer),r||(r=!0,n(y));b[f]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",
this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",
this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=f.get(a);b||f.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=f.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var f=
a.attrName,k=a.relatedNode.namespaceURI,n=a.target,e=new c("attributes",n);e.attributeName=f;e.attributeNamespace=k;var t=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;d(n,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(f)||-1!==a.attributeFilter.indexOf(k)))return a.attributeOldValue?b(t):e});break;case "DOMCharacterDataModified":n=a.target;e=c("characterData",n);t=a.prevValue;d(n,function(a){if(a.characterData)return a.characterDataOldValue?
b(t):e});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var n=a.relatedNode,l=a.target,g;"DOMNodeInserted"===a.type?(a=[l],g=[]):(a=[],g=[l]);var r=l.previousSibling,l=l.nextSibling,e=c("childList",n);e.addedNodes=a;e.removedNodes=g;e.previousSibling=r;e.nextSibling=l;d(n,function(a){if(a.childList)return e})}s=u=void 0}};h.JsMutationObserver=g;!h.MutationObserver&&h.WebKitMutationObserver&&(h.MutationObserver=h.WebKitMutationObserver);h.MutationObserver||(h.MutationObserver=
g)})(this)}catch(e$$15){};var _fs_git_hash="0ad0d021d3a1e256ddab063434dd9866ba78055e";
(function(){var h;(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=
25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH=
"thrash";a.isUserActionEvent=function(d){switch(d){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};a.MAX_LOGS_PER_PAGE=1024})(h||(h={}));(function(a){function d(a){var k={};if(!a)return k;
if(a.classList)for(var f=0;f<a.classList.length;++f)k[a.classList[f]]=!0;else if(a.className)for(a=(null!=a.className.animVal?a.className.animVal:a.className).split(" "),f=0;f<a.length;++f)k[a[f].trim()]=!0;return k}a.NYI_KIND="nyi";a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var g=function(){function a(b,f){var n=this;this._parent=b;this._classes={};this._attrs={};for(var c=0,e=0,d=0,g=function(){if(0!=d-e)switch(c){case 0:n._tag=f.slice(e,d);break;case 1:n._id=f.slice(e+1,d);break;case 2:n._classes[f.slice(e+
1,d)]=!0;break;case 3:var a=f.slice(e,d).slice(1).split("="),b=a[0].trim(),a=a[1].trim();if("]"!=a[a.length-1])throw"Unsupported selector";a=a.slice(0,a.length-1);if("'"==a[0]||'"'==a[0]){if(a[a.length-1]!=a[0])throw"Unsupported selector";a=a.slice(1,a.length-1)}n._attrs[b]=a}},d=0;d<f.length;++d)switch(f[d]){case "#":g();c=1;e=d;break;case ".":g();c=2;e=d;break;case "[":g(),c=3,e=d}g()}a.prototype.parent=function(){return this._parent};a.prototype.serialize=function(){var a="";this._tag&&(a+=this._tag);
this._id&&(a+="#"+this._id);for(var b in this._classes)a+="."+b;for(var n in this._attrs)a+="["+n+"="+this._attrs[n]+"]";return a};a.prototype.matches=function(a,b){if(!a||this._tag&&a.tagName.toLowerCase()!=this._tag||this._id&&a.id!=this._id)return!1;for(var n in this._classes)if(!(n in b))return!1;for(var c in this._attrs)if(a.getAttribute(c)!=this._attrs[c])return!1;return this._parent?this._parent.matches(a.parentElement,d(a.parentElement)):!0};return a}();a.BlockRuleElem=g;var e=function(){function a(b){this.kind=
b.Kind;b=b.Selector.split(">");for(var f=null,n=0;n<b.length;)var c=b[n++].trim(),f=new g(f,c);this.rules=f}a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent())a=a?b.serialize()+">"+a:b.serialize();return a};return a}();a.BlockRule=e;var c=function(){function a(){this._rules=[];this.rawRules=[]}a.prototype.isBlocked=function(a){for(var b=d(a),c=0;c<this._rules.length;++c)if(this._rules[c].rules.matches(a,b))return this._rules[c].kind;return null};a.prototype.addRule=function(a){this.rawRules.push(a);
this._rules.push(new e(a))};a.prototype.mungeBlockedStyle=function(a,b){var c=a.getBoundingClientRect(),e=Math.floor(c.width),c=Math.floor(c.height);if("object"==a.tagName.toLowerCase())for(var d=a.children,g=0;g<d.length;g++){var p=d[g];if("embed"==p.tagName.toLowerCase()){d=p.getBoundingClientRect();e=Math.max(e,Math.floor(d.width));c=Math.max(c,Math.floor(d.height));break}}d="";null!=b&&(d=b.trim());0<d.length&&";"!=d.charAt(d.length-1)&&(d+=";");g=a.style.getPropertyValue("display");"inline"==
(g?g:window.getComputedStyle(a).getPropertyValue("display")).toLowerCase()&&(d+="display: inline-block !important;");if(0!=e||0!=c)d+="width:"+e+"px;height:"+c+"px;";return d};return a}();a.Blocker=c})(h||(h={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=
11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(h||(h={}));(function(a){function d(a){return"_fsblocked"in a}function g(a,b){a._fsblocked=b}function e(a){return a?a._fs:null}function c(a){return(a=e(a))?a.id:0}function b(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];b(e.name,e.value)}}a.isBlocked=d;a.blockKind=function(a){return a._fsblocked};a.setBlocked=g;a.mirrorFor=e;a.fsid=
c;a.fsidIfNotBlocked=function(a){return d(a)?0:c(a)};var k=function(){function c(a,b){this._ctx=a;this._blocker=b;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.tokenizeNode=function(a,b,c,f){var k=this._curId;try{var d=[],g=this.tokeNode(c,d,f);if(g&&a){var h=e(a),z=e(b);g.parent=h;z==h.child&&(h.child=g);g.next=z;null==z?(g.prev=h.lastChild,h.lastChild=g):g.prev=z.prev;null!=g.prev&&(g.prev.next=g);null!=g.next&&(g.next.prev=g)}return d}catch(A){return this._curId=k,
[]}};c.prototype.removeMirror=function(a){a.parent.child==a&&(a.parent.child=a.next);a.parent.lastChild==a&&(a.parent.lastChild=a.prev);a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev);a.id=0;a.child&&this.clearIds(a.child)};c.prototype.clearIds=function(a){a.id=0;a.next&&this.clearIds(a.next);a.child&&this.clearIds(a.child)};c.prototype.tokeNode=function(c,e,f){if("SCRIPT"==c.nodeName||c.nodeType==a.Node_COMMENT_NODE)return null;var k={id:this._curId++,node:c};c._fs=k;var d=c.nodeName;"http://www.w3.org/2000/svg"==
c.namespaceURI&&(d="svg:"+d);e.push("<"+d);try{if(this.processBlockedElem(c,e))return k;f&&f(c);b(c,function(a,b){e.push(":"+a);e.push(b)});if(c.firstChild){e.push("[");for(var d=null,g=c.firstChild;g;g=g.nextSibling){var h=this.tokeNode(g,e,f);h&&(h.parent=k,d?(d.next=h,h.prev=d):k.child=h,d=k.lastChild=h)}e.push("]")}c.nodeType==a.Node_TEXT_NODE&&e.push(c.textContent)}catch(u){}return k};c.prototype.processBlockedElem=function(c,e){var k=this;if(c.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var f=
this._blocker.isBlocked(c);if(f){g(c,f);var d,h=!1;b(c,function(a,b){if("class"==a)b+=" _fs_block_"+f,d=!0;else if("style"==a)b=k._blocker.mungeBlockedStyle(c,b),h=!0;else if("value"==a||"checked"==a||"src"==a)return;e.push(":"+a);e.push(b)});d||(e.push(":class"),e.push("_fs_block_"+f));h||(e.push(":style"),e.push(this._blocker.mungeBlockedStyle(c,"")));return!0}}return!1};return c}();a.NodeEncoder=k})(h||(h={}));(function(a){function d(a,c){var e=Object.getOwnPropertyDescriptor(a.prototype,c);Object.defineProperty(a.prototype,
c,{set:function(a){var c=this;setTimeout(function(){b(c)},0);return e.set.call(this,a)},get:function(){return e.get.call(this)}})}function g(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return a.value}}var e=function(){function e(c,k){var d=this;this._onchange=c;this._checkElem=k;this._fallback=!1;this._elems={};this._values={};b=function(b){var c=a.fsid(b);if(c&&(b=d._elems[c])){var e=g(b);e!=d._values[c]&&(d._onchange(b),d._values[c]=e)}}}e.prototype.hookEvents=function(){var a;
(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(c||(d(HTMLInputElement,"value"),d(HTMLInputElement,"checked"),d(HTMLSelectElement,"value"),d(HTMLTextAreaElement,"value"),c=!0),a=!0):a=!1;a||(this._fallback=!0)};e.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this._values[c]=g(b);this._values[c]&&this._onchange(b)};e.prototype.tick=function(){if(this._fallback)for(var a in this._elems)if(this._checkElem(this._elems[a])){var b=this._elems[a],c=g(b);
c!=this._values[a]&&(this._onchange(b),this._values[a]=c)}else delete this._elems[a],delete this._values[a]};e.prototype._usingFallback=function(){return this._fallback};e.prototype._trackingElem=function(a){return!!this._elems[a]};return e}();a.InputWatcher=e;var c=!1,b;a.valueOfInputishElem=g})(h||(h={}));(function(a){var d=function(){function a(){this.dict={idx:-1,map:{}};this.startIdx=0}a.prototype.encode=function(a){function c(){k?1<g.length?f.push([k.idx,g.length]):f.push(k.idx):f.push(g[0])}
if(0==a.length)return[];var b,k=null,f=[],d,g=[a[0]];for(b=1;b<a.length;b++)if(d=a[b],k&&k.map.hasOwnProperty(d))g.push(d),k=k.map[d];else{c();var h=this.startIdx+b-g.length;null==k&&(k={idx:h,map:{}},this.dict.map[g[g.length-1]]=k);k.map[d]={idx:h,map:{}};g=[d];k=this.dict.map.hasOwnProperty(d)?this.dict.map[d]:null}c();this.startIdx+=a.length;return f};return a}();a.LZJGWEncoder=d;d=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var c=
this._seq.length,b=0;b<a.length;++b){var k=a[b];switch(typeof k){case "string":this._seq.push(k);break;case "number":this._seq.push(this._seq[k]);break;case "object":for(var d=0;d<k[1];d++)this._seq.push(this._seq[k[0]+d])}}return c};return a}();a.LZJGWDecoder=d})(h||(h={}));(function(a){a.MUTATION_PROCESSING_INTERVAL=250;a.CURVE_SAMPLING_INTERVAL=142;a.UPLOAD_INTERVAL=5E3;a.USER_INACTIVITY_TIMEOUT=1E4;var d=function(){function a(c){this._interval=c;this._handle=-1}a.prototype.oneShot=function(a){setTimeout(a,
this._interval)};a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}(),g=function(){function e(c,b,e,f,g,h,l){"undefined"===typeof f&&(f=function(){});"undefined"===typeof g&&(g=new d(a.CURVE_SAMPLING_INTERVAL));"undefined"===typeof h&&(h=new d(a.MUTATION_PROCESSING_INTERVAL));"undefined"===typeof l&&(l=new d(a.UPLOAD_INTERVAL));this._ctx=c;this._processor=
b;this._mutProvider=e;this._beforeProcessEvents=f;this._sampleCurvesTicker=g;this._processMutationsTicker=h;this._uploadTicker=l;this._eventQueue=[];this._outgoingQueue=[];this._bundleQueue=[];this._recordingDisabled=!1;this._bundleSeq=1;this._lastWhenTime=this._lastPostTime=0;this._lastWhen=-1;this._lastUserAction=0;this._gotUnload=!1;this._lastBundleTime=c.wallTime()}e.prototype.rawQueue=function(){return this._eventQueue};e.prototype.startPipeline=function(){var a=this;this._recordingDisabled||
this._pipelineStarted||(this.processEvents(),this._processMutationsTicker.start(function(){a.processEvents()}),this._sampleCurvesTicker.start(function(){a.processEvents(!0)}),this._ctx.amInsideIFrame()||(this.enqueueNextBundle(),this._uploadTicker.start(function(){a.enqueueNextBundle()})),this._pipelineStarted=!0)};e.prototype.enqueue=function(a,b){this.enqueueAt(this._ctx.now(),a,b)};e.prototype.enqueueAt=function(c,b,e){this._recordingDisabled||(c<=this._lastWhen&&(c=this._lastWhen+1),this._lastWhen=
c,this._eventQueue.push({When:c,Kind:b,Args:e}),a.isUserActionEvent(b)&&(this._lastUserAction=c))};e.prototype.disableRecording=function(){this._recordingDisabled=!0;this.stopPipeline()};e.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this.swanSong())};e.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this.disableRecording()};e.prototype._flush=function(){this.processEvents();this.maybeSendNextBundle()};e.prototype.prequeue=
function(a,b){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:b})};e.prototype.appendToOutgoingQueue=function(a){this._outgoingQueue=this._outgoingQueue.concat(a)};e.prototype.lastSentEventTime=function(){return this._lastWhenTime};e.prototype.swanSong=function(){if(!this._recordingDisabled&&!this._ctx.amInsideIFrame()&&(this.processEvents(),this.enqueueNextBundle(),0<this._bundleQueue.length||this._pendingBundle)){var c=this._bundleQueue.concat();this._pendingBundle&&c.unshift(this._pendingBundle);
a.log("Saving "+c.length+" bundles in swan-song.");c={UserId:this._ctx.userId(),SessionId:this._ctx.sessionId(),PageId:this._ctx.pageId(),Bundles:c,PageStartTime:this._ctx.startTime(),LastBundleTime:this._lastBundleTime};try{localStorage.swanSong=a.stringify(c)}catch(b){}}};e.prototype.recoverSwanSong=function(){if(!this._ctx.amInsideIFrame())try{if("swanSong"in localStorage){var c=localStorage.swanSong;delete localStorage.swanSong;var b=a.parseJson(c);if(b.Bundles)if(b.Bundles&&b.UserId&&b.SessionId&&
b.PageId)for(c=0;c<b.Bundles.length;++c){var e=null;0==c&&(e=this._ctx.wallTime()-b.LastBundleTime);this.sendSwanSongBundle(b.UserId,b.SessionId,b.PageId,b.PageStartTime,b.Bundles[c],e)}else a.log("Malformed swan song found. Ignoring it.");else b.Bundle&&b.UserId&&b.SessionId&&b.PageId?this.sendSwanSongBundle(b.UserId,b.SessionId,b.PageId,b.PageStartTime||0,b.Bundle,b.LastBundleTime?this._ctx.wallTime()-b.LastBundleTime:null):a.log("Malformed swan song found. Ignoring it.")}}catch(d){a.log("Error recovering swan-song: "+
d)}};e.prototype.sendSwanSongBundle=function(c,b,e,d,g,h){c="/rec/bundle?OrgId="+this._ctx.orgId()+"&UserId="+c+"&SessionId="+b+"&PageId="+e+"&Seq="+g.Seq;0!=d&&(c+="&PageStartTime="+d);h&&(c+="&DeltaT="+h);this._ctx.post(c,g,function(b){a.log("Sent "+g.Evts.length+" trailing events from last session as Seq "+g.Seq)},function(){a.log("Failed to send events from last session")})};e.prototype.rebaseIframe=function(c){var b=this._ctx.baseUri();0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,
Kind:a.EVENT_SET_FRAME_BASE,Args:[b]}):this.enqueue(a.EVENT_SET_FRAME_BASE,[b]);for(var b=0,e=this._eventQueue.length;b<e;b++){var d=this._eventQueue[b],g=d.When+this._ctx.startTime()-c;0>g&&(g=0);d.When=g}};e.prototype.processEvents=function(c){this._beforeProcessEvents();if((this._eventQueue.length||this._mutProvider.hasMutations())&&!(this._ctx.now()-this._lastUserAction>a.USER_INACTIVITY_TIMEOUT)){var b=this._eventQueue;this._eventQueue=[];b=this._processor.processQueue(b);c||(b=b.concat(this._mutProvider.processMutations()));
this.ensureFrameIds(b);this._ctx.amInsideIFrame()?parent.postMessage(a.FS_IFRAME_EVENTS+a.FS_DELIMITER+a.stringify(b),"*"):void 0!==this._ctx.pageId()&&(this._outgoingQueue=this._outgoingQueue.concat(b))}};e.prototype.ensureFrameIds=function(a){var b=this._ctx.frameId();if(b)for(var e=0;e<a.length;++e)a[e].FId=b};e.prototype.enqueueNextBundle=function(){if(0==this._outgoingQueue.length)return this.maybeSendNextBundle(),null;var a={When:this._outgoingQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingQueue};
this._outgoingQueue=[];this._bundleQueue.push(a);this.maybeSendNextBundle()};e.prototype.maybeSendNextBundle=function(){var c=this;if(this._ctx.pageId()&&!this._pendingBundle&&0!=this._bundleQueue.length){var b=this._pendingBundle=this._bundleQueue.shift(),e=this._ctx.wallTime(),d="/rec/bundle?OrgId="+this._ctx.orgId()+"&UserId="+this._ctx.userId()+"&SessionId="+this._ctx.sessionId()+"&PageId="+this._ctx.pageId()+"&Seq="+b.Seq+"&DeltaT="+(e-this._lastBundleTime);this._lastPostTime=this._lastBundleTime=
e;this._lastWhenTime=b.Evts[b.Evts.length-1].When;var g=function(){c._ctx.post(d,b,function(e){a.log("Sent bundle "+b.Seq+" with "+b.Evts.length+" events");c._pendingBundle=null;c._ctx.wallTime()-c._lastPostTime>a.UPLOAD_INTERVAL&&c.maybeSendNextBundle()},function(b){a.log("Failed to send events.");if(404!=b)c._uploadTicker.oneShot(g)})};g()}};e.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._uploadTicker.stop())};
return e}();a.EventQueue=g})(h||(h={}));(function(a){var d=function(){function d(e,c,b){"undefined"===typeof b&&(b=function(a,b){});this._ctx=e;this._blocker=c;this._visitor=b;this._sentDomSnapshot=!1;this._records=[];this._lz=new a.LZJGWEncoder;this._encoder=new a.NodeEncoder(e,c)}d.prototype.hasMutations=function(){return!this._sentDomSnapshot||0<this._records.length};d.prototype.hookMutations=function(a){var c=this;"undefined"===typeof a&&(a=document.documentElement);this._root=a;this._sentDomSnapshot=
!1;(new window.MutationObserver(function(a){c._records=c._records.concat(a)})).observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};d.prototype.processMutations=function(){var e=this._ctx.now(),c=[];this._sentDomSnapshot||(this.genInsert(e,c,null,this._root,null),this._sentDomSnapshot=!0);if(0==this._records.length)return c;var b={},d={};this.processRecords(e,c,d,b);for(var f in d){var g=f.split(":");c.push({Kind:a.EVENT_MUT_ATTR,When:e,
Args:[parseInt(g[0]),g[1],d[f]]})}for(f in b)c.push({Kind:a.EVENT_MUT_TEXT,When:e,Args:[parseInt(f),b[f]]});this._records=[];return c};d.prototype.processRecords=function(e,c,b,d){for(var f={},g={},h=0;h<this._records.length;++h)try{var l=this._records[h],r=a.fsid(l.target);if(r)switch(f[r]=l.target,l.type){case "childList":if(0<l.removedNodes.length)for(var p=0;p<l.removedNodes.length;++p){var q=a.mirrorFor(l.removedNodes[p]);q&&q.id&&q.parent==a.mirrorFor(l.target)&&q.next==a.mirrorFor(l.nextSibling)&&
this.genRemove(e,c,q)}r&&(g[r]=l.target);break;case "characterData":var s=l.target.textContent;l.oldValue!=s&&(a.isBlocked(l.target)||(d[r]=s));break;case "attributes":var u=l.attributeName;l.target.hasAttribute(u)?(s=l.target.getAttribute(u),l.oldValue!=s&&(s=this.rewriteAttr(l.target,u,s),null!==s&&(b[r+":"+u]=s))):b[r+":"+u]=null}}catch(z){}for(var A in g)b=g[A],(d=a.mirrorFor(b))&&d.id&&this.diff(e,c,b,d.child,b.firstChild);for(A in f)b=f[A],this.maybeAddPlaceholderResize(e,c,b)};d.prototype.diff=
function(e,c,b,d,f){for(;d&&f;){var g=a.mirrorFor(f);a.fsid(f)?d.id==g.id?(d=d.next,f=f.nextSibling):(this.genRemove(e,c,d),d=d.next):(this.genInsert(e,c,b,f,d.node),f=f.nextSibling)}for(;d;d=d.next)this.genRemove(e,c,d);for(;f;f=f.nextSibling)this.genInsert(e,c,b,f,null)};d.prototype.maybeAddPlaceholderResize=function(e,c,b){try{for(;b&&!a.fsid(b);)b=b.parentNode;if(b&&a.isBlocked(b)){var d=b.getBoundingClientRect(),f=Math.floor(d.width),g=Math.floor(d.height);c.push({When:e,Kind:a.EVENT_PLACEHOLDER_SIZE,
Args:[a.fsid(b),f,g]})}}catch(h){}};d.prototype.genInsert=function(e,c,b,d,g){var h=this;if(b&&a.isBlocked(b))return null;d=this._encoder.tokenizeNode(b,g,d,function(a){h._visitor(e,a)});0<d.length&&c.push({When:e,Kind:a.EVENT_MUT_INSERT,Args:[a.fsid(b)||-1,a.fsid(g)||-1,this._lz.encode(d)]})};d.prototype.genRemove=function(e,c,b){var d=b.id;this._encoder.removeMirror(b);if(0<c.length&&(b=c[c.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(d);return}c.push({When:e,Kind:a.EVENT_MUT_REMOVE,Args:[d]})};
d.prototype.rewriteAttr=function(e,c,b){switch(c){case "style":a.isBlocked(e)&&(b=this._blocker.mungeBlockedStyle(e,b));break;case "class":a.isBlocked(e)&&0>b.indexOf("_fs_block_")&&(e=a.blockKind(e),b+=" _fs_block_"+e);break;case "value":a.isBlocked(e)&&(b=null)}return b};return d}();a.MutationHandler=d})(h||(h={}));(function(a){var d=function(){function a(c,b,d){this._ctx=c;this._q=b;this._valueIndices=d;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};
a.prototype.finish=function(a,b){var d=this._evts.length;if(1>=d)return!1;for(var e=this._evts[0].When,g=this._evts[d-1].When,h=0;h<this._valueIndices.length;++h){var l=this._valueIndices[h],r=this._evts[0].Args[l],p=(this._evts[1].When-e)/(g-e),q=(this._evts[1].Args[l]-r)/p,s=this._evts[d-1].Args[l],p=(g-this._evts[d-2].When)/(g-e);b.push(r,s,q,(s-this._evts[d-2].Args[l])/p)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),g=function(){function e(a,
b){this._ctx=a;this._blocker=b;this._gotInitialScroll=!1}e.prototype.processQueue=function(c){if(0==c.length)return c;this.maybeAddInitialScroll();for(var b=this._ctx.now(),e=[],g=new d(this._ctx,e,[0,1]),h={},t={},l,r=0;r<c.length;++r){var p=c[r];switch(p.Kind){case a.EVENT_MOUSEMOVE:g.add(p);break;case a.EVENT_TOUCHMOVE:var q=p.Args[0];q in h||(h[q]=new d(this._ctx,e,[1,2]));h[q].add(p);break;case a.EVENT_SCROLL:q=p.Args[0];q in t||(t[q]=new d(this._ctx,e,[1,2]));t[q].add(p);break;case a.EVENT_INNERWIDTH:l||
(l=new d(this._ctx,e,[0]));l.add(p);break;default:e.push(p)}}g.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(c=g.evts(),g=c[c.length-1].Args,2<g.length&&g[2]&&c[0].Args.push(g[2]));for(q in t)c=parseInt(q),t[c].finish(a.EVENT_SCROLL_CURVE,[b,c]);for(q in h)c=parseInt(q),h[c].finish(a.EVENT_TOUCHMOVE_CURVE,[b,c]);l&&l.finish(a.EVENT_INNERWIDTH_CURVE,[b]);return e};e.prototype.maybeAddInitialScroll=function(){!this._gotInitialScroll&&(document.body&&a.fsid(document.body))&&(this._ctx.addWindowScroll(),this._gotInitialScroll=
!0)};return e}();a.EventProcessor=g})(h||(h={}));(function(a){var d=function(){function d(a){this._queue=a;this._overflow=this._enabled=!1;this._total=0}d.prototype.enable=function(){var a=this;a._enabled||(a._enabled=!0,window.console?(console.log&&console.log.apply&&(a._oldLog=console.log,console.log=function(){a.addLog("log",arguments);return a._oldLog.apply(this,arguments)}),console.info&&console.info.apply&&(a._oldInfo=console.info,console.info=function(){a.addLog("info",arguments);return a._oldInfo.apply(this,
arguments)}),console.warn&&console.warn.apply&&(a._oldWarn=console.warn,console.warn=function(){a.addLog("warn",arguments);return a._oldWarn.apply(this,arguments)}),console.error&&console.error.apply&&(a._oldError=console.error,console.error=function(){a.addLog("error",arguments);return a._oldError.apply(this,arguments)})):a.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),a._oldOnError=window.onerror,window.onerror=function(d,b,g){a.addError(d,b,g);if(a._oldOnError)return a._oldOnError.apply(this,
arguments)})};d.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&(console.error=this._oldError),window.onerror=this._oldOnError)};d.prototype.addLog=function(d,c){if(this.checkOverflow()){for(var b=[d],g=0;g<c.length;++g){try{var f=a.stringify(c[g])}catch(h){f=a.stringify(c[g].toString())}b.push(f)}this._queue.enqueue(a.EVENT_LOG,b)}};d.prototype.addError=
function(d,c,b){this.checkOverflow()&&this._queue.enqueue(a.EVENT_ERROR,[d,c,b])};d.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",d.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};d.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return d}();a.ConsoleHook=d})(h||(h={}));(function(a){function d(a){H&&window.console&&console.log(a)}function g(a){D||
(D=window.JSON);var b=Array.prototype.toJSON,d=String.prototype.toJSON;b&&delete Array.prototype.toJSON;d&&delete String.prototype.toJSON;a=D.stringify(a);b&&(Array.prototype.toJSON=b);d&&(String.prototype.toJSON=d);return a}function e(a){D||(D=window.JSON);return D.parse(a)}function c(){return(new Date).getTime()}function b(){return window!=top&&!W}function h(b,c,e,f){"undefined"===typeof f&&(f=null);b="//"+B+b;var k=null;null!=c&&(k=g(c),M+=k.length,d("total bytes written: "+M));var l=new XMLHttpRequest;
if("withCredentials"in l)l.onreadystatechange=function(){l.readyState==a.XHR_DONE&&(200==l.status?e(l.responseText):f(l.status))},l.open("POST","https:"+b,!0),l.withCredentials=!0,l.setRequestHeader("Content-Type","text/plain"),l.send(k);else{var m=new XDomainRequest;m.onload=function(){e(m.responseText)};m.onerror=function(){f("Not Found"==m.responseText?404:500)};m.onprogress=function(){};m.open("POST",b);m.send(k)}}function f(){if("baseURI"in document)return document.baseURI;var a=document.getElementsByTagName("base")[0];
return a&&a.href?a.href:location.href}function n(a){(a=a.target.tagName)&&(a=a.toLowerCase());return a}function t(a,b){return a.tagName&&a.tagName.toLowerCase()in b?!0:a.parentNode?t(a.parentNode,b):!1}function l(a,b){if(void 0!==a.changedTouches)for(var d=0;d<a.changedTouches.length;++d){var c=a.changedTouches[d];m.enqueue(b,[c.identifier,c.clientX,c.clientY])}}function r(){var b=document.activeElement;if(b&&"value"in b){var d=a.fsidIfNotBlocked(b);d&&m.enqueue(a.EVENT_VALUECHANGE,[d,b.value])}}
function p(){var b=window.innerWidth;b!=X&&(m.enqueue(a.EVENT_INNERWIDTH,[b]),X=b)}function q(a,b){a in N||(N[a]=setTimeout(function(){delete N[a];b()},qa))}function s(){var b=a.fsid(document.body);b&&q(b,function(){var d,c;"pageXOffset"in window?(d=window.pageXOffset,c=window.pageYOffset):(d=document.body.scrollLeft,c=document.body.scrollTop);if(d!=Y||c!=Z)m.enqueue(a.EVENT_SCROLL,[b,d,c]),Y=d,Z=c;p()})}function u(b){var d=b.target,c=a.fsid(d);c&&q(c,function(){m.enqueue(a.EVENT_SCROLL,[c,d.scrollLeft,
d.scrollTop])})}function z(){$?m.enqueue(a.EVENT_RESIZE,[document.body.clientWidth,document.body.clientHeight]):m.enqueue(a.EVENT_RESIZE,[document.documentElement.clientWidth,document.documentElement.clientHeight])}function A(){var b=location.href;O!=b&&(O=b,m.enqueue(a.EVENT_NAVIGATE,[location.href,document.title]))}function y(b){var d=a.fsidIfNotBlocked(b);d&&m.enqueue(a.EVENT_VALUECHANGE,[d,a.valueOfInputishElem(b)])}function na(){for(var a={},b=document.cookie.split(";"),d=0;d<b.length;d++){var c=
b[d].replace(/^\s+|\s+$/g,"").split("=");a[c[0]]=c[1]}if(b=a.fs_uid){b=b.split("`");if(3!=b.length)return a.fs_uid;if(b[0]==B&&b[1]==w)return b[2]}return""}function T(a){x=a.UserIntId;I=a.SessionIntId;P=a.PageIntId;aa=a.CookieDomain;ba=a.EmbedToken;document.cookie="fs_uid="+B+"`"+w+"`"+x+"; domain=."+encodeURIComponent(aa)+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";d("/User,"+x+"/Session,"+I+"/Page,"+P)}function L(a){if(J&&a){var b=document.createElement("script");b.text=a;b.async=!0;document.head.appendChild(b)}}
function U(){var a=document.doctype;if(!a)return null;var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"}function pa(){(x=na())||(x="");var b=document.documentElement,c=window._fs_hash,G=window._fs_replay_flags;O=location.href;if(K)b={OrgId:w,UserId:x,Url:location.href,Base:f(),ScreenWidth:window.screen.width,ScreenHeight:window.screen.height,Width:b.clientWidth,Height:b.clientHeight,Referrer:document.referrer,Doctype:U(),Hash:c},
G&&(b.ReplayFlags=G),h("/rec/page",b,function(b){try{var c=e(b)}catch(G){V();return}b=c;T(b);Q=b.IntegrationScript;L(b.IntegrationScript);m.prequeue(a.EVENT_SYS_SETVAR,["user",g(c.InitSetUserVars),!0]);if(window._fs_ready)try{window._fs_ready()}catch(f){d("exception in _fs_ready(): "+f)}for(b=0;b<c.Blocks.length;++b)v.addRule(c.Blocks[b]);m.startPipeline()},function(a){V()});else{d("Unable to record playback stream.");var l=document.createElement("script");window.__fs_startResponse=function(a){T(a);
Q=a.IntegrationScript;L(a.IntegrationScript);document.body.removeChild(l)};l.src="//"+B+"/rec/page?OrgId="+w+"&UserId="+x+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(f())+"&ScreenWidth="+window.screen.width+"&ScreenHeight="+window.screen.height+"&Width="+b.clientWidth+"&Height="+b.clientHeight+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(U())+"&Fallback=true"+(G?"&ReplayFlags="+G:"")+(c?"&Hash="+c:"");document.body.appendChild(l)}}function V(){m.disableRecording();
ca();d("Disabling FS.");if(window._fs_ready)try{window._fs_ready(!0)}catch(a){d("exception in _fs_ready(): "+a)}}function oa(){da.hookMutations();document.documentElement.addEventListener("scroll",function(a){u(a)},!0);window.addEventListener("mousemove",function(b){b=a.fsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];m.enqueue(a.EVENT_MOUSEMOVE,b)},!0);window.addEventListener("mousedown",function(b){m.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY]);!t(b.target,{button:!0,
a:!0,input:!0})||"input"==n(b)&&"submit"!=b.target.type||m.swanSong()},!0);window.addEventListener("mouseup",function(b){m.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])},!0);window.addEventListener("keydown",function(b){r();var d=document.activeElement;d&&!a.fsidIfNotBlocked(d)||m.enqueue(a.EVENT_KEYDOWN,[b.keyCode]);switch(n(b)){case "button":13!=b.keyCode&&32!=b.keyCode||m.swanSong();break;case "a":13==b.keyCode&&m.swanSong();break;case "input":"submit"==b.target.type&&13==b.keyCode&&m.swanSong()}},
!0);window.addEventListener("keyup",function(b){r();var d=document.activeElement;d&&!a.fsidIfNotBlocked(d)||m.enqueue(a.EVENT_KEYUP,[b.keyCode])},!0);window.addEventListener("scroll",function(a){s()});window.addEventListener("resize",function(a){z()});document.body.addEventListener("click",function(b){(b=a.fsid(b.target))&&m.enqueue(a.EVENT_CLICK,[b])},!0);document.body.addEventListener("focus",function(b){(b=a.fsid(b.target))&&m.enqueue(a.EVENT_FOCUS,[b])},!0);document.body.addEventListener("blur",
function(b){(b=a.fsid(b.target))&&m.enqueue(a.EVENT_BLUR,[b])},!0);document.body.addEventListener("change",function(a){y(a.target)},!0);window.addEventListener("touchstart",function(b){l(b,a.EVENT_TOUCHSTART);s()},!0);window.addEventListener("touchend",function(b){l(b,a.EVENT_TOUCHEND);s()},!0);window.addEventListener("touchmove",function(b){l(b,a.EVENT_TOUCHMOVE);s()},!0);window.addEventListener("touchcancel",function(b){l(b,a.EVENT_TOUCHCANCEL)},!0);window.addEventListener("play",function(b){var d=
a.EVENT_PLAY;(b=a.fsid(b.target))&&m.enqueue(d,[b])},!0);window.addEventListener("pause",function(b){var d=a.EVENT_PAUSE;(b=a.fsid(b.target))&&m.enqueue(d,[b])},!0);R.hookEvents();if(history.pushState){window.addEventListener("popstate",function(){A()});var b=history.pushState;history.pushState=function(a,d,c){b.call(this,a,d,c);A()};var d=history.replaceState;history.replaceState=function(a,b,c){d.call(this,a,b,c);A()}}}function ea(){fa.enable()}function ra(){var d=function(){J||(J=!0,m.enqueue(a.EVENT_DOMLOADED,
[]),oa(),z(),L(Q))},c=!1,e=function(){c||(c=!0,m.enqueue(a.EVENT_LOAD,[]))};switch(document.readyState){case "interactive":document.attachEvent||d();break;case "complete":d(),e()}J||document.addEventListener("DOMContentLoaded",function(a){d()});c||window.addEventListener("load",function(a){d();e()});b()||(window.addEventListener("beforeunload",function(a){m.addUnload()}),window.addEventListener("unload",function(a){m.addUnload()}))}function ga(b,c){switch(b){case "user":var e={},f;for(f in c)if(c.hasOwnProperty(f)){var h=
c[f];d("set-var('user'): "+f+'" = '+g(h));var k,l;if(f in ha)k=f,l=ha[f];else{l=f.split("_");if(2!=l.length){d('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');continue}-1!=f.indexOf(" ")?(k=f.replace(/ /g,""),d("Warning: variable '"+f+"' has spaces in it, which is not recommended. Converted name to '"+k+"'.")):k=f;l=l[1]}l in ia?ia[l](h)?("date"==l&&(h=(h.constructor===Date?h:new Date(h)).toISOString()),e[k]=h):d("illegal value "+g(h)+" for type "+
l):d('invalid type "'+l+'"')}m.enqueue(a.EVENT_SYS_SETVAR,["user",g(e)]);break;default:d('invalid operation "'+b+'"; only "user" is supported at present')}}function ja(){return x+":"+I}function sa(){window.addEventListener("message",function(b){if("string"==typeof b.data&&0==b.data.indexOf(a.FS_MESSAGE_PREFIX)){var c=b.data.split(a.FS_DELIMITER);if(c[0]==a.FS_SET_FRAME_ID_CMD)try{var g=parseInt(c[1]),f=parseInt(c[2]);var h=e(c[3]);if(g)if(C)d("frame Id is already set to "+C+". Received second request to set it to "+
g+" Iframe:"+location.href);else{d("FrameId received within frame "+location.href+": "+g);C=g;for(c=0;c<h.length;++c)v.addRule(h[c]);m.rebaseIframe(f);E=f;m.startPipeline()}else d("Outer page gave us a bogus frame Id! Iframe: "+location.href)}catch(k){d("Failed to parse frameId from message"+b.data)}else c[0]==a.FS_DISABLE_RECORDING?(m.disableRecording(),ca()):d("Invalid _fs postmessage command"+c[0])}});C||(0==C?d("For some reason the outer window attempted to request a frameId"):(d("Asking for a frame ID from within frame: "+
location.href),parent.postMessage(a.FS_REQUEST_FRAME_ID+a.FS_DELIMITER,"*")))}function ca(){for(var b=0;b<F.length;b++){var d=F[b];d.contentWindow&&d.contentWindow.postMessage&&d.contentWindow.postMessage(a.FS_DISABLE_RECORDING,"*")}}function ta(){window.addEventListener("message",function(b){if("string"==typeof b.data&&0==b.data.indexOf(a.FS_MESSAGE_PREFIX)){var c=b.data.split(a.FS_DELIMITER);if(c[0]==a.FS_IFRAME_EVENTS){if(b=e(c[1]),0<b.length){var c=m.lastSentEventTime(),f=ka[b[0].FId];c<f&&(c=
f);if(b[0].When<c)for(var c=c-b[0].When,f=0,h=b.length;f<h;f++)b[f].When+=c;m.appendToOutgoingQueue(b)}}else if(c[0]==a.FS_REQUEST_FRAME_ID){a:{c=b.source;for(f=0;f<F.length;f++)if(F[f].contentWindow==c){c=a.fsid(F[f]);break a}d("Unable to locate frame for window");c=NaN}c?(d("Responding to FID request for frame "+c),f=g(v.rawRules),b.source.postMessage(a.FS_SET_FRAME_ID_CMD+a.FS_DELIMITER+c+a.FS_DELIMITER+E+a.FS_DELIMITER+f,"*")):d("No FrameId found. Hoping to send one later.")}else d("Invalid _fs postmessage command"+
c[0])}})}function la(a){d("Injecting into Frame ["+a.src+"]");try{if(a.src&&("about:blank"!=a.src&&0>a.src.indexOf("javascript:"))&&a.src!=a.contentWindow.location.href)d("Frame not yet loaded: "+a.src);else{var b=a.contentDocument;a="var _fs_org='"+w+"', _fs_host='"+B+"', _fs_run_in_iframe=true, _fs_debug="+H+"; (function(w,a,t){a=w.createElement('script');a.async=1;a.src='https://'+_fs_host+'/s/fs.js';w.head.appendChild(a)})(document);";var c=b.createElement("script");c.textContent=a;b.head.appendChild(c)}}catch(e){d("iFrame no injecty. Probably not same origin.")}}
function ua(b,c){var e=this;F.push(c);if(c.hasAttribute("src")&&("about:blank"!=c.src&&0!=c.src.indexOf("javascript:")&&0!=c.src.indexOf(va)||"FS"in c.contentWindow)){if(d("Frame Doesn't need injecting. Probably cross domain ["+c.src+"]"),c.contentWindow.postMessage){d("Eagerly sending FrameId "+b+" to Frame ["+c.src+"]");var f=g(v.rawRules);c.contentWindow.postMessage(a.FS_SET_FRAME_ID_CMD+a.FS_DELIMITER+b+a.FS_DELIMITER+E+a.FS_DELIMITER+f,"*")}}else{d("Attempting to setup Frame ["+c.src+"]");la(c);
var h=c.onload;c.onload=function(a){d("onload for frame ["+c.src+"]");h&&"function"==typeof h&&h.call(e,a);la(c)}}}var qa=a.MUTATION_PROCESSING_INTERVAL/5,H=!1,M=0,w,x,I,P,C,B,aa,va=window.location.protocol+"//"+window.location.host,W,K,E=c(),O,J=!1,Q=null,ka={},ma,Y=-1,Z=-1,X=0,N={},ba,D,$=!1,S={startTime:function(){return E},now:function(){return c()-E},wallTime:c,orgId:function(){return w},userId:function(){return x},sessionId:function(){return I},pageId:function(){return P},baseUri:f,amInsideIFrame:b,
frameId:function(){return C},post:h,addWindowScroll:s},v=new a.Blocker,R=new a.InputWatcher(function(a){y(a)},function(b){return!!a.fsid(b)}),da=new a.MutationHandler(S,v,function(b,c){switch(c.nodeName){case "INPUT":case "TEXTAREA":case "SELECT":R.addInput(c);break;case "FRAME":case "IFRAME":var e=a.fsid(c);if(!e){d("fsid missing or invalid for iFrame."+c.src);break}ma||(ta(),ma=!0);ka[e]=b;ua(e,c);break;case "VIDEO":case "AUDIO":c.paused||(e=a.fsid(c),m.enqueue(a.EVENT_PLAY,[e]))}}),wa=new a.EventProcessor(S,
v),m=new a.EventQueue(S,wa,da,function(){R.tick();p()}),fa=new a.ConsoleHook(m);window._fs_shutdown=function(a){m.shutdown();a&&(a=document.getElementById(a))&&a.setAttribute("_fs_embed_token",ba)};a.log=d;a.stringify=g;a.parseJson=e;a.enableConsole=ea;a.disableConsole=function(){fa.disable()};a._init=function(){if("_fs_host"in window||"_fs_ext_host"in window)if("_fs_org"in window||"_fs_ext_org"in window)if("_fs_ext_debug"in window?H=!!window._fs_ext_debug:"_fs_debug"in window&&(H=!!window._fs_debug),
B=window._fs_ext_host||window._fs_host,w=window._fs_ext_org||window._fs_org,d("host: "+B),d("orgid: "+w),$="BackCompat"==document.compatMode,W=!!window._fs_is_outer_script,C=b()?null:0,K=!!window.MutationEvent,b())window._fs_run_in_iframe?parent.postMessage?sa():(K=!1,d("postMessage not supported")):d("Fullstory recording for this page is NOT allowed within an iFrame.");else{v.addRule({Selector:"object",Kind:a.NYI_KIND});v.addRule({Selector:"embed",Kind:a.NYI_KIND});v.addRule({Selector:"canvas",Kind:a.NYI_KIND});
v.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});v.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});var c=window.FS.q;if(c){for(var e=0;e<c.length;e++)ga(c[e][0],c[e][1]);delete window.FS.q}pa()}else d("Missing global _fs_org. Recording disabled.");else d("Missing global _fs_host. Recording disabled.")};a._record=function(){K&&(m.recoverSwanSong(),E=c(),ra(),ea())};var ha={uid:"str",displayName:"str",email:"str"},ia={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},
"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return!isNaN(a.constructor===Date?a:new Date(a))}};a._api=ga;a.setUid=function(b,c,e){b&&"string"==typeof b?c&&"string"!=typeof c?d("setUid(): second argument (display name) must be a string"):(c||(c=b),e&&"object"!=typeof e?d('setUid(): third argument (metadata) must be of the form {name0: "value0", name1: "value1", ...}'):(e=e?g(e):"",d("setting uid: "+b+", meta: "+e),m.enqueue(a.EVENT_SYS_SETMETA,
[b,c,e]))):d("setUid(): first argument (user id) is required and must be a string")};a.getCurrentSessionURL=function(){return"https://"+B+"/ui/"+w+"/session/"+ja()};a.getCurrentSession=ja;a.FS_MESSAGE_PREFIX="_fs";a.FS_DELIMITER="\u2603";a.FS_REQUEST_FRAME_ID=a.FS_MESSAGE_PREFIX+"RequestFrameId";a.FS_SET_FRAME_ID_CMD=a.FS_MESSAGE_PREFIX+"SetFrameId";a.FS_IFRAME_EVENTS=a.FS_MESSAGE_PREFIX+"EvtBundle";a.FS_DISABLE_RECORDING=a.FS_MESSAGE_PREFIX+"DisableRecording";var F=[]})(h||(h={}));try{"FS"in window||
(window.FS={}),window.FS.setUid=h.setUid,window.FS.getCurrentSessionURL=h.getCurrentSessionURL,window.FS.getCurrentSession=h.getCurrentSession,window.FS.enableConsole=h.enableConsole,window.FS.disableConsole=h.disableConsole,window.FS._api=h._api,h._init(),h._record()}catch(y){window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
//# sourceMappingURL=/s/fs.map